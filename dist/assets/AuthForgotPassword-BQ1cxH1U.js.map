{"version":3,"file":"AuthForgotPassword-BQ1cxH1U.js","sources":["../../src/views/pages/authentication/auth0/AuthForgotPassword.jsx"],"sourcesContent":["import { useNavigate, useSearchParams } from 'react-router-dom';\n\n// material-ui\nimport Button from '@mui/material/Button';\nimport FormHelperText from '@mui/material/FormHelperText';\nimport InputLabel from '@mui/material/InputLabel';\nimport OutlinedInput from '@mui/material/OutlinedInput';\nimport Box from '@mui/material/Box';\n\n// third party\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\n\n// project imports\nimport AnimateButton from 'ui-component/extended/AnimateButton';\nimport CustomFormControl from 'ui-component/extended/Form/CustomFormControl';\nimport useAuth from 'hooks/useAuth';\nimport useScriptRef from 'hooks/useScriptRef';\n\nimport { useDispatch } from 'store';\nimport { openSnackbar } from 'store/slices/snackbar';\n\n// ========================|| AUTH0 - FORGOT PASSWORD ||======================== //\n\nexport default function AuthForgotPassword({ ...others }) {\n  const scriptedRef = useScriptRef();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const { isLoggedIn, resetPassword } = useAuth();\n\n  const [searchParams] = useSearchParams();\n  const authParam = searchParams.get('auth');\n\n  return (\n    <Formik\n      initialValues={{\n        email: '',\n        submit: null\n      }}\n      validationSchema={Yup.object().shape({\n        email: Yup.string().email('Must be a valid email').max(255).required('Email is required')\n      })}\n      onSubmit={async (values, { setErrors, setStatus, setSubmitting }) => {\n        try {\n          await resetPassword?.(values.email).then(\n            () => {\n              setStatus({ success: true });\n              setSubmitting(false);\n              dispatch(\n                openSnackbar({\n                  open: true,\n                  message: 'Check mail for reset password link',\n                  variant: 'alert',\n                  alert: {\n                    color: 'success'\n                  },\n                  close: false\n                })\n              );\n              setTimeout(() => {\n                navigate(\n                  isLoggedIn\n                    ? '/auth/check-mail'\n                    : authParam\n                      ? `/check-mail/${authParam}`\n                      : '/check-mail',\n                  {\n                    replace: true\n                  }\n                );\n              }, 1500);\n\n              // WARNING: do not set any formik state here as formik might be already destroyed here. You may get following error by doing so.\n              // Warning: Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application.\n              // To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.\n              // github issue: https://github.com/formium/formik/issues/2430\n            },\n            (err) => {\n              setStatus({ success: false });\n              setErrors({ submit: err.message });\n              setSubmitting(false);\n            }\n          );\n        } catch (err) {\n          console.error(err);\n          if (scriptedRef.current) {\n            setStatus({ success: false });\n            setErrors({ submit: err.message });\n            setSubmitting(false);\n          }\n        }\n      }}\n    >\n      {({ errors, handleBlur, handleChange, handleSubmit, isSubmitting, touched, values }) => (\n        <form noValidate onSubmit={handleSubmit} {...others}>\n          <CustomFormControl fullWidth error={Boolean(touched.email && errors.email)}>\n            <InputLabel htmlFor=\"outlined-adornment-email-forgot\">\n              Email Address / Username\n            </InputLabel>\n            <OutlinedInput\n              id=\"outlined-adornment-email-forgot\"\n              type=\"email\"\n              value={values.email}\n              name=\"email\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              label=\"Email Address / Username\"\n            />\n            {touched.email && errors.email && (\n              <FormHelperText error id=\"standard-weight-helper-text-email-forgot\">\n                {errors.email}\n              </FormHelperText>\n            )}\n          </CustomFormControl>\n\n          {errors.submit && (\n            <Box sx={{ mt: 3 }}>\n              <FormHelperText error>{errors.submit}</FormHelperText>\n            </Box>\n          )}\n\n          <Box sx={{ mt: 2 }}>\n            <AnimateButton>\n              <Button\n                disableElevation\n                disabled={isSubmitting}\n                fullWidth\n                size=\"large\"\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"secondary\"\n              >\n                Send Mail\n              </Button>\n            </AnimateButton>\n          </Box>\n        </form>\n      )}\n    </Formik>\n  );\n}\n"],"names":["useNavigate","useSearchParams","importShared","AuthForgotPassword","others","scriptedRef","useScriptRef","dispatch","useDispatch","navigate","isLoggedIn","resetPassword","useAuth","searchParams","authParam","jsx","Formik","Yup.object","Yup.string","values","setErrors","setStatus","setSubmitting","openSnackbar","err","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","jsxs","CustomFormControl","InputLabel","OutlinedInput","FormHelperText","Box","AnimateButton","Button"],"mappings":"8iBAAA,KAAA,CAAA,YAAAA,EAAA,gBAAAC,CAAA,EAAA,MAAAC,EAAA,kBAAA,EAwBA,SAAwBC,EAAmB,CAAE,GAAGC,GAAU,CACxD,MAAMC,EAAcC,EAAA,EACdC,EAAWC,EAAA,EACXC,EAAWT,EAAA,EAEX,CAAE,WAAAU,EAAY,cAAAC,CAAA,EAAkBC,EAAA,EAEhC,CAACC,CAAY,EAAIZ,EAAA,EACjBa,EAAYD,EAAa,IAAI,MAAM,EAEzC,OACEE,EAAAA,IAACC,EAAA,CACC,cAAe,CACb,MAAO,GACP,OAAQ,IAAA,EAEV,iBAAkBC,EAAI,EAAS,MAAM,CACnC,MAAOC,EAAI,EAAS,MAAM,uBAAuB,EAAE,IAAI,GAAG,EAAE,SAAS,mBAAmB,CAAA,CACzF,EACD,SAAU,MAAOC,EAAQ,CAAE,UAAAC,EAAW,UAAAC,EAAW,cAAAC,KAAoB,CACnE,GAAI,CACF,MAAMX,IAAgBQ,EAAO,KAAK,EAAE,KAClC,IAAM,CACJE,EAAU,CAAE,QAAS,GAAM,EAC3BC,EAAc,EAAK,EACnBf,EACEgB,EAAa,CACX,KAAM,GACN,QAAS,qCACT,QAAS,QACT,MAAO,CACL,MAAO,SAAA,EAET,MAAO,EAAA,CACR,CAAA,EAEH,WAAW,IAAM,CACfd,EACEC,EACI,mBACAI,EACE,eAAeA,CAAS,GACxB,cACN,CACE,QAAS,EAAA,CACX,CAEJ,EAAG,IAAI,CAMT,EACCU,GAAQ,CACPH,EAAU,CAAE,QAAS,GAAO,EAC5BD,EAAU,CAAE,OAAQI,EAAI,OAAA,CAAS,EACjCF,EAAc,EAAK,CACrB,CAAA,CAEJ,OAASE,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACbnB,EAAY,UACdgB,EAAU,CAAE,QAAS,GAAO,EAC5BD,EAAU,CAAE,OAAQI,EAAI,OAAA,CAAS,EACjCF,EAAc,EAAK,EAEvB,CACF,EAEC,UAAC,CAAE,OAAAG,EAAQ,WAAAC,EAAY,aAAAC,EAAc,aAAAC,EAAc,aAAAC,EAAc,QAAAC,EAAS,OAAAX,CAAA,WACxE,OAAA,CAAK,WAAU,GAAC,SAAUS,EAAe,GAAGxB,EAC3C,SAAA,CAAA2B,EAAAA,KAACC,EAAA,CAAkB,UAAS,GAAC,MAAO,GAAQF,EAAQ,OAASL,EAAO,OAClE,SAAA,CAAAV,EAAAA,IAACkB,EAAA,CAAW,QAAQ,kCAAkC,SAAA,2BAEtD,EACAlB,EAAAA,IAACmB,EAAA,CACC,GAAG,kCACH,KAAK,QACL,MAAOf,EAAO,MACd,KAAK,QACL,OAAQO,EACR,SAAUC,EACV,MAAM,0BAAA,CAAA,EAEPG,EAAQ,OAASL,EAAO,OACvBV,EAAAA,IAACoB,EAAA,CAAe,MAAK,GAAC,GAAG,2CACtB,SAAAV,EAAO,KAAA,CACV,CAAA,EAEJ,EAECA,EAAO,QACNV,EAAAA,IAACqB,EAAA,CAAI,GAAI,CAAE,GAAI,GACb,eAACD,EAAA,CAAe,MAAK,GAAE,SAAAV,EAAO,OAAO,EACvC,EAGFV,EAAAA,IAACqB,GAAI,GAAI,CAAE,GAAI,GACb,eAACC,EAAA,CACC,SAAAtB,EAAAA,IAACuB,EAAA,CACC,iBAAgB,GAChB,SAAUT,EACV,UAAS,GACT,KAAK,QACL,KAAK,SACL,QAAQ,YACR,MAAM,YACP,SAAA,WAAA,CAAA,EAGH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAIR"}