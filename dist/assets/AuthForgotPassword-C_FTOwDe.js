import{importShared as j}from"./__federation_fn_import-CJIdJiQv.js";import{j as e}from"./useForkRef-BC7kqYKT.js";import{P as k}from"./index-DPd4syO_.js";import{F as v,c as y,a as F}from"./formik.esm-5mQln88F.js";import{A as P}from"./AnimateButton-CtU13Uu0.js";import{C as w}from"./CustomFormControl-DYO5qZVr.js";import{a as A,u as B,o as C}from"./useAuth-gpoeUZ-p.js";import{u as E}from"./useScriptRef-B1Ou_bIU.js";import{b as S,O as T}from"./OutlinedInput-DFKZAVh6.js";import{F as l}from"./FormHelperText-BLwmyjL3.js";import{B as n}from"./Box-DmbfI6Tx.js";import{d as $}from"./Button-Bgis-uOM.js";const{useNavigate:I,useSearchParams:R}=await j("react-router-dom");function q({link:c,...u}){const d=E(),p=A(),h=I(),{isLoggedIn:f,resetPassword:x}=B(),[g]=R(),o=g.get("auth");return e.jsx(v,{initialValues:{email:"",submit:null},validationSchema:y().shape({email:F().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(a,{setErrors:i,setStatus:s,setSubmitting:t})=>{try{await x?.(a.email).then(()=>{s({success:!0}),t(!1),p(C({open:!0,message:"Check mail for reset password link",variant:"alert",alert:{color:"success"},close:!1})),setTimeout(()=>{h(f?`/pages/check-mail/${c||"check-mail3"}`:o?`/check-mail?auth=${o}`:"/check-mail",{replace:!0})},1500)},r=>{s({success:!1}),i({submit:r.message}),t(!1)})}catch(r){console.error(r),d.current&&(s({success:!1}),i({submit:r.message}),t(!1))}},children:({errors:a,handleBlur:i,handleChange:s,handleSubmit:t,isSubmitting:r,touched:m,values:b})=>e.jsxs("form",{noValidate:!0,onSubmit:t,...u,children:[e.jsxs(w,{fullWidth:!0,error:!!(m.email&&a.email),children:[e.jsx(S,{htmlFor:"outlined-adornment-email-forgot",children:"Email Address / Username"}),e.jsx(T,{id:"outlined-adornment-email-forgot",type:"email",value:b.email,name:"email",onBlur:i,onChange:s,label:"Email Address / Username"}),m.email&&a.email&&e.jsx(l,{error:!0,id:"standard-weight-helper-text-email-forgot",children:a.email})]}),a.submit&&e.jsx(n,{sx:{mt:3},children:e.jsx(l,{error:!0,children:a.submit})}),e.jsx(n,{sx:{mt:2},children:e.jsx(P,{children:e.jsx($,{disableElevation:!0,disabled:r,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Send Mail"})})})]})})}q.propTypes={link:k.string};export{q as default};
//# sourceMappingURL=AuthForgotPassword-C_FTOwDe.js.map
