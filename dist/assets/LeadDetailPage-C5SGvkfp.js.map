{"version":3,"file":"LeadDetailPage-C5SGvkfp.js","sources":["../../src/views/pages/leads/LeadDetailPage.tsx"],"sourcesContent":["import { useCallback, useEffect, useMemo, useState, type ReactElement } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport Alert from '@mui/material/Alert';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Chip from '@mui/material/Chip';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Grid from '@mui/material/GridLegacy';\nimport Typography from '@mui/material/Typography';\n\nimport MainCard from 'ui-component/cards/MainCard';\nimport { leadsApi } from 'services/leads';\nimport type { Lead } from 'types/api';\nimport { isAxiosError } from 'axios';\n\nfunction formatDate(value?: string | null) {\n  if (!value) {\n    return '—';\n  }\n\n  return new Intl.DateTimeFormat(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  }).format(new Date(value));\n}\n\nfunction formatScore(score?: number | null) {\n  if (score === null || score === undefined || Number.isNaN(score)) {\n    return '—';\n  }\n\n  return `${Math.round(score)}%`;\n}\n\ntype LoadError = { kind: 'not-found'; message: string } | { kind: 'network'; message: string };\n\nfunction isValidLeadId(value: string | undefined): value is string {\n  if (!value) return false;\n  const uuidPattern =\n    /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[089abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/;\n  const numericPattern = /^\\d+$/;\n  return uuidPattern.test(value) || numericPattern.test(value);\n}\n\nexport default function LeadDetailPage(): ReactElement {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [lead, setLead] = useState<Lead | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<LoadError | null>(null);\n\n  const loadLead = useCallback(async () => {\n    if (!isValidLeadId(id)) {\n      setError({\n        kind: 'not-found',\n        message: 'The requested lead could not be found.'\n      });\n      setLoading(false);\n      return;\n    }\n    setLoading(true);\n    try {\n      const result = await leadsApi.getLead(id);\n      setLead(result);\n      setError(null);\n    } catch (err) {\n      if (isAxiosError(err)) {\n        if (err.response?.status === 404) {\n          setError({\n            kind: 'not-found',\n            message: 'The requested lead could not be found.'\n          });\n        } else {\n          setError({\n            kind: 'network',\n            message:\n              err.response?.data?.message ??\n              'We could not load this lead. Please try again in a moment.'\n          });\n        }\n      } else {\n        setError({\n          kind: 'network',\n          message: 'We could not load this lead. Please try again in a moment.'\n        });\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    void loadLead();\n  }, [loadLead]);\n\n  const statusColor = useMemo<'default' | 'success' | 'error' | 'info'>(() => {\n    const status = lead?.status?.toLowerCase();\n    switch (status) {\n      case 'converted':\n      case 'qualified':\n        return 'success';\n      case 'unqualified':\n        return 'error';\n      case 'working':\n      case 'contacted':\n        return 'info';\n      default:\n        return 'default';\n    }\n  }, [lead?.status]);\n\n  return (\n    <MainCard\n      title=\"Lead Details\"\n      secondary={\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          <Button variant=\"outlined\" onClick={() => navigate(-1)}>\n            Back\n          </Button>\n          {id && (\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={() => navigate(`/leads/${id}/edit`)}\n            >\n              Edit Lead\n            </Button>\n          )}\n        </Box>\n      }\n    >\n      {loading && (\n        <Box sx={{ display: 'flex', justifyContent: 'center', py: 6 }}>\n          <CircularProgress />\n        </Box>\n      )}\n\n      {!loading && error && (\n        <Alert severity={error.kind === 'network' ? 'error' : 'warning'}>\n          <Typography variant=\"body2\" sx={{ mb: 1 }}>\n            {error.message}\n          </Typography>\n          <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n            {error.kind === 'network' && (\n              <Button size=\"small\" onClick={() => void loadLead()} variant=\"outlined\">\n                Retry\n              </Button>\n            )}\n            <Button size=\"small\" onClick={() => navigate('/leads')} variant=\"contained\">\n              Back to Leads\n            </Button>\n          </Box>\n        </Alert>\n      )}\n\n      {!loading && !error && lead && (\n        <Grid container spacing={2}>\n          <Grid xs={12} sx={{ display: 'flex', flexDirection: 'column', gap: 0.5 }}>\n            <Typography variant=\"h4\">\n              {lead.firstName} {lead.lastName}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Lead ID: {lead.id}\n            </Typography>\n          </Grid>\n\n          <Grid xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Email\n            </Typography>\n            <Typography variant=\"body1\">{lead.email}</Typography>\n          </Grid>\n\n          <Grid xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Phone\n            </Typography>\n            <Typography variant=\"body1\">{lead.phone ?? '—'}</Typography>\n          </Grid>\n\n          <Grid xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Company\n            </Typography>\n            <Typography variant=\"body1\">{lead.company ?? '—'}</Typography>\n          </Grid>\n\n          <Grid xs={12} md={6} sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Status\n            </Typography>\n            <Chip label={lead.status ?? '—'} color={statusColor} size=\"small\" />\n          </Grid>\n\n          <Grid xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Source\n            </Typography>\n            <Typography variant=\"body1\">{lead.source ?? '—'}</Typography>\n          </Grid>\n\n          <Grid xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Score\n            </Typography>\n            <Typography variant=\"body1\">{formatScore(lead.score)}</Typography>\n          </Grid>\n\n          <Grid xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Owner\n            </Typography>\n            <Typography variant=\"body1\">{lead.ownerId}</Typography>\n          </Grid>\n\n          <Grid xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Created At\n            </Typography>\n            <Typography variant=\"body1\">{formatDate(lead.createdAt)}</Typography>\n          </Grid>\n\n          <Grid xs={12} md={6}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Updated At\n            </Typography>\n            <Typography variant=\"body1\">{formatDate(lead.updatedAt)}</Typography>\n          </Grid>\n\n          <Grid xs={12}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              Notes\n            </Typography>\n            <Typography variant=\"body1\">{lead.notes ?? '—'}</Typography>\n          </Grid>\n        </Grid>\n      )}\n    </MainCard>\n  );\n}\n"],"names":["useCallback","useEffect","useMemo","useState","importShared","useNavigate","useParams","formatDate","value","formatScore","score","isValidLeadId","uuidPattern","numericPattern","LeadDetailPage","id","navigate","lead","setLead","loading","setLoading","error","setError","loadLead","result","leadsApi","err","isAxiosError","statusColor","jsxs","MainCard","Box","jsx","Button","CircularProgress","Alert","Typography","Grid","Chip"],"mappings":"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"}