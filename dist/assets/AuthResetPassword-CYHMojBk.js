import{importShared as v}from"./__federation_fn_import-CJIdJiQv.js";import{j as s}from"./useForkRef-BC7kqYKT.js";import{F as O,c as z,a as p}from"./formik.esm-5mQln88F.js";import{O as D}from"./index.esm-CvgShb-1.js";import{u as L,d as E,o as G}from"./useAuth-gpoeUZ-p.js";import{u as M}from"./useScriptRef-B1Ou_bIU.js";import{A as H}from"./AnimateButton-CtU13Uu0.js";import{C as b}from"./CustomFormControl-DYO5qZVr.js";import{s as N,a as J}from"./password-strength-Bgoot3mc.js";import{V as K,a as Q}from"./VisibilityOff-CGi2pO1E.js";import{u as U}from"./useTheme-kfTkFvI8.js";import{B as d}from"./Box-DmbfI6Tx.js";import{A as X}from"./Alert-C9XT2yne.js";import{I as Y}from"./IconBug-C3jDaoo_.js";import{F as u}from"./FormHelperText-BLwmyjL3.js";import{b as P,O as y,F as h}from"./OutlinedInput-DFKZAVh6.js";import{I as Z}from"./InputAdornment-D_aBeDhu.js";import{I as _}from"./IconButton-BEyrMm9G.js";import{G as f}from"./Grid-s-sihYX_.js";import{T as ss}from"./Typography-DFd_zA1D.js";import{d as rs}from"./Button-Bgis-uOM.js";const{useEffect:es,useState:x}=await v("react"),{useNavigate:os,useSearchParams:ts}=await v("react-router-dom");function Ss({...C}){const l=U(),I=M(),S=os(),[m,B]=x(!1),[F,A]=x(0),[w,R]=x(),{awsResetPassword:T,isLoggedIn:q}=L(),V=()=>{B(!m)},W=r=>{r.preventDefault()},j=r=>{const e=N(r);A(e),R(J(e))};es(()=>{j("123456")},[]);const[$]=ts(),g=$.get("auth");return s.jsx(O,{initialValues:{otp:"",password:"",confirmPassword:"",submit:null},validationSchema:z().shape({otp:p().max(255).required("Verification Code is required"),password:p().max(255).required("Password is required"),confirmPassword:p().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(r,e)=>e.parent.password===r)}),onSubmit:async(r,{setErrors:e,setStatus:a,setSubmitting:i})=>{try{await T?.(r.otp,r.password).then(()=>{i(!1),E(G({open:!0,message:"Password Reset Successfully",variant:"alert",alert:{color:"success"},close:!1})),setTimeout(()=>{S(q?"/auth/login":g?`/login?auth=${g}`:"/login",{replace:!0})},1500)}).catch(n=>{a({success:!1}),e({submit:n}),i(!1)})}catch(n){I.current&&(a({success:!1}),e({submit:n.message}),i(!1))}},children:({errors:r,handleBlur:e,handleChange:a,handleSubmit:i,isSubmitting:n,touched:o,values:c,setFieldValue:k})=>s.jsxs("form",{noValidate:!0,onSubmit:i,...C,children:[s.jsxs(d,{sx:{mb:1.25},children:[o&&r&&r.submit&&s.jsx(X,{severity:"error",icon:s.jsx(Y,{}),sx:{mb:1},children:r?.submit}),s.jsx(d,{sx:{"& input:focus-visible":{borderColor:`${l.vars.palette.primary.main} !important`,boxShadow:`0px 0px 0px 1px ${l.vars.palette.primary.main}`}},children:s.jsx(D,{value:c.otp,onChange:t=>k("otp",t),numInputs:6,inputType:"tel",shouldAutoFocus:!0,containerStyle:{justifyContent:"space-between"},inputStyle:{width:"100%",margin:"4px",padding:"16px",backgroundColor:l.vars.palette.grey[50],border:`1px solid ${l.vars.palette.grey[400]}`,borderRadius:4,outline:"none"},renderInput:t=>s.jsx("input",{...t})})}),o.otp&&r.otp&&s.jsx(u,{error:!0,id:"helper-text-password-reset",children:r.otp})]}),s.jsxs(b,{fullWidth:!0,error:!!(o.password&&r.password),children:[s.jsx(P,{htmlFor:"outlined-adornment-password-reset",children:"Password"}),s.jsx(y,{id:"outlined-adornment-password-reset",type:m?"text":"password",value:c.password,name:"password",onBlur:e,onChange:t=>{a(t),j(t.target.value)},endAdornment:s.jsx(Z,{position:"end",children:s.jsx(_,{"aria-label":"toggle password visibility",onClick:V,onMouseDown:W,edge:"end",size:"large",children:m?s.jsx(K,{}):s.jsx(Q,{})})})})]}),o.password&&r.password&&s.jsx(h,{fullWidth:!0,children:s.jsx(u,{error:!0,id:"standard-weight-helper-text-reset",children:r.password})}),F!==0&&s.jsx(h,{fullWidth:!0,children:s.jsx(d,{sx:{mb:2},children:s.jsxs(f,{container:!0,spacing:2,sx:{alignItems:"center"},children:[s.jsx(f,{children:s.jsx(d,{sx:{width:85,height:8,borderRadius:"7px",bgcolor:w?.color}})}),s.jsx(f,{children:s.jsx(ss,{variant:"subtitle1",sx:{fontSize:"0.75rem"},children:w?.label})})]})})}),s.jsxs(b,{fullWidth:!0,error:!!(o.confirmPassword&&r.confirmPassword),children:[s.jsx(P,{htmlFor:"outlined-adornment-confirm-password",children:"Confirm Password"}),s.jsx(y,{id:"outlined-adornment-confirm-password",type:"password",value:c.confirmPassword,name:"confirmPassword",label:"Confirm Password",onBlur:e,onChange:a})]}),o.confirmPassword&&r.confirmPassword&&s.jsx(h,{fullWidth:!0,children:s.jsxs(u,{error:!0,id:"standard-weight-helper-text-confirm-password",children:[" ",r.confirmPassword," "]})}),s.jsx(d,{sx:{mt:1},children:s.jsx(H,{children:s.jsx(rs,{disableElevation:!0,disabled:n,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Reset Password"})})})]})})}export{Ss as default};
//# sourceMappingURL=AuthResetPassword-CYHMojBk.js.map
