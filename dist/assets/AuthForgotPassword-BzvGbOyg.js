import{importShared as u}from"./__federation_fn_import-ROHmt-Wr.js";import{j as e}from"./useForkRef-BcC6EfDH.js";import{b2 as v}from"./chunk-NISHYRIK-Cu-FB_BF.js";import{F as S,c as w,a as F}from"./formik.esm-BDPjx_Ed.js";import{A}from"./AnimateButton-N8956-bY.js";import{C as B}from"./CustomFormControl-DKaMyQB2.js";import{a as E,u as I,o as y}from"./useAuth-BzjTK7K8.js";import{u as C}from"./useScriptRef-BDOReukG.js";import{b as P,O as k}from"./OutlinedInput-B7rhNNoC.js";import{F as n}from"./FormHelperText-D_FQF2TV.js";import{B as c}from"./Box-BoOsA6HK.js";import{d as L}from"./Button-BSxsv2fQ.js";const{useState:R,useEffect:$}=await u("react"),{useSearchParams:q}=await u("react-router-dom");function K({...d}){const i=C(),f=E(),p=v(),[h,x]=R(!1),{forgotPassword:g}=I();$(()=>{localStorage.removeItem("email"),localStorage.removeItem("error")},[]);const[b]=q(),m=b.get("auth");return e.jsx(S,{initialValues:{email:"",submit:null},validationSchema:w().shape({email:F().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(a,{setErrors:o,setStatus:r,setSubmitting:t})=>{x(!0),localStorage.setItem("email",a.email);try{await g?.(a.email),i.current&&(r({success:!0}),t(!1),f(y({open:!0,message:"Check mail for verification code",variant:"alert",alert:{color:"success"},close:!1})),setTimeout(()=>{p(m?`/reset-password?auth=${m}`:"/reset-password",{replace:!0})},1500))}catch(s){console.error(s),i.current&&(r({success:!1}),o({submit:s.message}),t(!1))}},children:({errors:a,handleBlur:o,handleChange:r,handleSubmit:t,isSubmitting:s,touched:l,values:j})=>e.jsxs("form",{noValidate:!0,onSubmit:t,...d,children:[e.jsxs(B,{fullWidth:!0,error:!!(l.email&&a.email),children:[e.jsx(P,{htmlFor:"outlined-adornment-email-forgot",children:"Email Address / Username"}),e.jsx(k,{id:"outlined-adornment-email-forgot",type:"email",value:j.email,name:"email",onBlur:o,onChange:r,label:"Email Address / Username"}),l.email&&a.email&&e.jsx(n,{error:!0,id:"standard-weight-helper-text-email-forgot",children:a.email})]}),a.submit&&e.jsx(c,{sx:{mt:3},children:e.jsx(n,{error:!0,children:a.submit})}),e.jsx(c,{sx:{mt:2},children:e.jsx(A,{children:e.jsx(L,{disableElevation:!0,disabled:h||s,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Send Mail"})})})]})})}export{K as default};
//# sourceMappingURL=AuthForgotPassword-BzvGbOyg.js.map
