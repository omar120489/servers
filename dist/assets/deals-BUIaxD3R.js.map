{"version":3,"file":"deals-BUIaxD3R.js","sources":["../../src/services/deals.ts"],"sourcesContent":["import { apiDelete, apiGet, apiPatch, apiPost } from 'utils/axios';\nimport type {\n  ApiResponse,\n  Deal,\n  DealCreateDto,\n  DealQuery,\n  DealUpdateDto,\n  PaginatedResponse,\n  UUID\n} from 'types/api';\n\nconst BASE_PATH = '/api/deals';\n\nfunction toDealUpdateDto(payload: DealUpdateDto): Record<string, unknown> {\n  const out: Record<string, unknown> = {};\n  if (payload.name !== undefined) out.name = payload.name;\n  if (payload.amount !== undefined) out.amount = payload.amount;\n  if (payload.stage !== undefined) out.stage = payload.stage;\n  if (payload.status !== undefined) out.status = payload.status;\n  if (payload.ownerId !== undefined) out.ownerId = payload.ownerId;\n  if (payload.companyId !== undefined) out.companyId = payload.companyId;\n  if (payload.contactId !== undefined) out.contactId = payload.contactId;\n  if (payload.closeDate !== undefined) out.closeDate = payload.closeDate;\n  if (payload.probability !== undefined) out.probability = payload.probability;\n  if (payload.description !== undefined) out.description = payload.description;\n  if (payload.grossRevenue !== undefined) out.gross_revenue = payload.grossRevenue;\n  if (payload.directCost !== undefined) out.direct_cost = payload.directCost;\n  if (payload.lossReason !== undefined) out.loss_reason = payload.lossReason;\n  if (payload.lossNotes !== undefined) out.loss_notes = payload.lossNotes;\n  return out;\n}\n\nfunction fromDealDto(dto: any): Deal {\n  return {\n    id: dto.id,\n    createdAt: dto.createdAt || dto.created_at,\n    updatedAt: dto.updatedAt || dto.updated_at,\n    name: dto.name,\n    amount: dto.amount,\n    stage: dto.stage,\n    status: dto.status,\n    ownerId: dto.ownerId || dto.owner_id,\n    companyId: dto.companyId || dto.company_id,\n    contactId: dto.contactId || dto.contact_id,\n    closeDate: dto.closeDate || dto.close_date,\n    probability: dto.probability,\n    description: dto.description,\n    grossRevenue: dto.grossRevenue ?? dto.gross_revenue ?? null,\n    directCost: dto.directCost ?? dto.direct_cost ?? null,\n    netProfit: dto.netProfit ?? dto.net_profit ?? null,\n    lossReason: dto.lossReason ?? dto.loss_reason ?? null,\n    lossNotes: dto.lossNotes ?? dto.loss_notes ?? null\n  };\n}\n\nexport async function listDeals(query?: DealQuery): Promise<PaginatedResponse<Deal>> {\n  const response = await apiGet<PaginatedResponse<any>>(BASE_PATH, { params: query });\n  return {\n    ...response,\n    items: response.items.map(fromDealDto)\n  };\n}\n\nexport async function getDeal(id: UUID): Promise<Deal> {\n  const response = await apiGet<any>(`${BASE_PATH}/${id}`);\n  return fromDealDto(response);\n}\n\nexport async function createDeal(payload: DealCreateDto): Promise<Deal> {\n  const response = await apiPost<DealCreateDto, any>(BASE_PATH, payload);\n  return fromDealDto(response);\n}\n\nexport async function updateDeal(id: UUID, payload: DealUpdateDto): Promise<Deal> {\n  const mappedPayload = toDealUpdateDto(payload);\n  const response = await apiPatch<Record<string, unknown>, any>(`${BASE_PATH}/${id}`, mappedPayload);\n  return fromDealDto(response);\n}\n\nexport async function deleteDeal(id: UUID): Promise<ApiResponse<void>> {\n  return apiDelete<ApiResponse<void>>(`${BASE_PATH}/${id}`);\n}\n\nexport const dealsApi = {\n  listDeals,\n  getDeal,\n  createDeal,\n  updateDeal,\n  deleteDeal\n};\n"],"names":["BASE_PATH","toDealUpdateDto","payload","out","fromDealDto","dto","listDeals","query","response","apiGet","getDeal","id","createDeal","apiPost","updateDeal","mappedPayload","apiPatch","deleteDeal","apiDelete","dealsApi"],"mappings":"6DAWA,MAAMA,EAAY,aAElB,SAASC,EAAgBC,EAAiD,CACxE,MAAMC,EAA+B,CAAA,EACrC,OAAID,EAAQ,OAAS,SAAWC,EAAI,KAAOD,EAAQ,MAC/CA,EAAQ,SAAW,SAAWC,EAAI,OAASD,EAAQ,QACnDA,EAAQ,QAAU,SAAWC,EAAI,MAAQD,EAAQ,OACjDA,EAAQ,SAAW,SAAWC,EAAI,OAASD,EAAQ,QACnDA,EAAQ,UAAY,SAAWC,EAAI,QAAUD,EAAQ,SACrDA,EAAQ,YAAc,SAAWC,EAAI,UAAYD,EAAQ,WACzDA,EAAQ,YAAc,SAAWC,EAAI,UAAYD,EAAQ,WACzDA,EAAQ,YAAc,SAAWC,EAAI,UAAYD,EAAQ,WACzDA,EAAQ,cAAgB,SAAWC,EAAI,YAAcD,EAAQ,aAC7DA,EAAQ,cAAgB,SAAWC,EAAI,YAAcD,EAAQ,aAC7DA,EAAQ,eAAiB,SAAWC,EAAI,cAAgBD,EAAQ,cAChEA,EAAQ,aAAe,SAAWC,EAAI,YAAcD,EAAQ,YAC5DA,EAAQ,aAAe,SAAWC,EAAI,YAAcD,EAAQ,YAC5DA,EAAQ,YAAc,SAAWC,EAAI,WAAaD,EAAQ,WACvDC,CACT,CAEA,SAASC,EAAYC,EAAgB,CACnC,MAAO,CACL,GAAIA,EAAI,GACR,UAAWA,EAAI,WAAaA,EAAI,WAChC,UAAWA,EAAI,WAAaA,EAAI,WAChC,KAAMA,EAAI,KACV,OAAQA,EAAI,OACZ,MAAOA,EAAI,MACX,OAAQA,EAAI,OACZ,QAASA,EAAI,SAAWA,EAAI,SAC5B,UAAWA,EAAI,WAAaA,EAAI,WAChC,UAAWA,EAAI,WAAaA,EAAI,WAChC,UAAWA,EAAI,WAAaA,EAAI,WAChC,YAAaA,EAAI,YACjB,YAAaA,EAAI,YACjB,aAAcA,EAAI,cAAgBA,EAAI,eAAiB,KACvD,WAAYA,EAAI,YAAcA,EAAI,aAAe,KACjD,UAAWA,EAAI,WAAaA,EAAI,YAAc,KAC9C,WAAYA,EAAI,YAAcA,EAAI,aAAe,KACjD,UAAWA,EAAI,WAAaA,EAAI,YAAc,IAAA,CAElD,CAEA,eAAsBC,EAAUC,EAAqD,CACnF,MAAMC,EAAW,MAAMC,EAA+BT,EAAW,CAAE,OAAQO,EAAO,EAClF,MAAO,CACL,GAAGC,EACH,MAAOA,EAAS,MAAM,IAAIJ,CAAW,CAAA,CAEzC,CAEA,eAAsBM,EAAQC,EAAyB,CACrD,MAAMH,EAAW,MAAMC,EAAY,GAAGT,CAAS,IAAIW,CAAE,EAAE,EACvD,OAAOP,EAAYI,CAAQ,CAC7B,CAEA,eAAsBI,EAAWV,EAAuC,CACtE,MAAMM,EAAW,MAAMK,EAA4Bb,EAAWE,CAAO,EACrE,OAAOE,EAAYI,CAAQ,CAC7B,CAEA,eAAsBM,EAAWH,EAAUT,EAAuC,CAChF,MAAMa,EAAgBd,EAAgBC,CAAO,EACvCM,EAAW,MAAMQ,EAAuC,GAAGhB,CAAS,IAAIW,CAAE,GAAII,CAAa,EACjG,OAAOX,EAAYI,CAAQ,CAC7B,CAEA,eAAsBS,EAAWN,EAAsC,CACrE,OAAOO,EAA6B,GAAGlB,CAAS,IAAIW,CAAE,EAAE,CAC1D,CAEO,MAAMQ,EAAW,CACtB,UAAAb,EACA,QAAAI,EACA,WAAAE,EACA,WAAAE,EACA,WAAAG,CACF"}