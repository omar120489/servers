import{importShared as y}from"./__federation_fn_import-CJIdJiQv.js";import{j as s}from"./useForkRef-BC7kqYKT.js";import{F as q,c as T,a as g}from"./formik.esm-5mQln88F.js";import{u as z,d as D,o as E}from"./useAuth-gpoeUZ-p.js";import{u as L}from"./useScriptRef-B1Ou_bIU.js";import{A as O}from"./AnimateButton-CtU13Uu0.js";import{C as P}from"./CustomFormControl-DYO5qZVr.js";import{s as $,a as G}from"./password-strength-Bgoot3mc.js";import{V as M,a as H}from"./VisibilityOff-CGi2pO1E.js";import{b,O as v,F as l}from"./OutlinedInput-DFKZAVh6.js";import{I as N}from"./InputAdornment-D_aBeDhu.js";import{I as J}from"./IconButton-BEyrMm9G.js";import{F as c}from"./FormHelperText-BLwmyjL3.js";import{B as n}from"./Box-DmbfI6Tx.js";import{G as m}from"./Grid-s-sihYX_.js";import{T as K}from"./Typography-DFd_zA1D.js";import{d as Q}from"./Button-Bgis-uOM.js";const{useEffect:U,useState:u}=await y("react"),{useNavigate:X,useSearchParams:Y}=await y("react-router-dom");function fs({...C}){const S=X(),p=L(),[d,B]=u(!1),[F,I]=u(0),[h,A]=u(),{isLoggedIn:R}=z(),W=()=>{B(!d)},V=r=>{r.preventDefault()},f=r=>{const e=$(r);I(e),A(G(e))};U(()=>{f("")},[]);const[k]=Y(),w=k.get("auth");return s.jsx(q,{initialValues:{password:"",confirmPassword:"",submit:null},validationSchema:T().shape({password:g().max(255).required("Password is required"),confirmPassword:g().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(r,e)=>e.parent.password===r)}),onSubmit:async(r,{setErrors:e,setStatus:o,setSubmitting:t})=>{try{p.current&&(o({success:!0}),t(!1),D(E({open:!0,message:"Successfuly reset password.",variant:"alert",alert:{color:"success"},close:!1})),setTimeout(()=>{S(R?"/auth/login":w?`/login?auth=${w}`:"/login",{replace:!0})},1500))}catch(a){console.error(a),p.current&&(o({success:!1}),e({submit:a.message}),t(!1))}},children:({errors:r,handleBlur:e,handleChange:o,handleSubmit:t,isSubmitting:a,touched:i,values:x})=>s.jsxs("form",{noValidate:!0,onSubmit:t,...C,children:[s.jsxs(P,{fullWidth:!0,error:!!(i.password&&r.password),children:[s.jsx(b,{htmlFor:"outlined-adornment-password-reset",children:"Password"}),s.jsx(v,{id:"outlined-adornment-password-reset",type:d?"text":"password",value:x.password,name:"password",onBlur:e,onChange:j=>{o(j),f(j.target.value)},endAdornment:s.jsx(N,{position:"end",children:s.jsx(J,{"aria-label":"toggle password visibility",onClick:W,onMouseDown:V,edge:"end",size:"large",children:d?s.jsx(M,{}):s.jsx(H,{})})})})]}),i.password&&r.password&&s.jsx(l,{fullWidth:!0,children:s.jsx(c,{error:!0,id:"standard-weight-helper-text-reset",children:r.password})}),F!==0&&s.jsx(l,{fullWidth:!0,children:s.jsx(n,{sx:{mb:2},children:s.jsxs(m,{container:!0,spacing:2,sx:{alignItems:"center"},children:[s.jsx(m,{children:s.jsx(n,{sx:{width:85,height:8,borderRadius:"7px",bgcolor:h?.color}})}),s.jsx(m,{children:s.jsx(K,{variant:"subtitle1",sx:{fontSize:"0.75rem"},children:h?.label})})]})})}),s.jsxs(P,{fullWidth:!0,error:!!(i.confirmPassword&&r.confirmPassword),children:[s.jsx(b,{htmlFor:"outlined-adornment-confirm-password",children:"Confirm Password"}),s.jsx(v,{id:"outlined-adornment-confirm-password",type:"password",value:x.confirmPassword,name:"confirmPassword",label:"Confirm Password",onBlur:e,onChange:o})]}),i.confirmPassword&&r.confirmPassword&&s.jsx(l,{fullWidth:!0,children:s.jsxs(c,{error:!0,id:"standard-weight-helper-text-confirm-password",children:[" ",r.confirmPassword," "]})}),r.submit&&s.jsx(n,{sx:{mt:3},children:s.jsx(c,{error:!0,children:r.submit})}),s.jsx(n,{sx:{mt:1},children:s.jsx(O,{children:s.jsx(Q,{disableElevation:!0,disabled:a,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Reset Password"})})})]})})}export{fs as default};
//# sourceMappingURL=AuthResetPassword-C7bBGOno.js.map
