{"version":3,"file":"useConfig-DxwEGHqB.js","sources":["../../src/hooks/useLocalStorage.ts","../../src/contexts/ConfigContext.tsx","../../src/hooks/useConfig.ts"],"sourcesContent":["import { useState, useEffect, useCallback, type Dispatch, type SetStateAction } from 'react';\n\ntype SetState<T> = Dispatch<SetStateAction<T>>;\n\nexport interface LocalStorageActions<T> {\n  state: T;\n  setState: SetState<T>;\n  setField: <K extends keyof T>(field: K, value: T[K]) => void;\n  resetState: () => void;\n}\n\n// ==============================|| HOOKS - LOCAL STORAGE ||============================== //\n\nexport function useLocalStorage<T extends Record<string, unknown>>(\n  key: string,\n  defaultValue: T\n): LocalStorageActions<T> {\n  const readValue = (): T => {\n    if (typeof window === 'undefined') {\n      return defaultValue;\n    }\n\n    try {\n      const item = localStorage.getItem(key);\n      return item ? (JSON.parse(item) as T) : defaultValue;\n    } catch (err) {\n      console.warn(`Error reading localStorage key \"${key}\":`, err);\n      return defaultValue;\n    }\n  };\n\n  const [state, setState] = useState<T>(() => readValue());\n\n  useEffect(() => {\n    try {\n      localStorage.setItem(key, JSON.stringify(state));\n    } catch (err) {\n      console.warn(`Error setting localStorage key \"${key}\":`, err);\n    }\n  }, [key, state]);\n\n  const setField = useCallback(\n    <K extends keyof T>(field: K, value: T[K]) => {\n      setState((prev) => ({\n        ...prev,\n        [field]: value\n      }));\n    },\n    [setState]\n  );\n\n  const resetState = useCallback(() => {\n    setState(defaultValue);\n    try {\n      localStorage.setItem(key, JSON.stringify(defaultValue));\n    } catch (err) {\n      console.warn(`Error resetting localStorage key \"${key}\":`, err);\n    }\n  }, [defaultValue, key]);\n\n  return { state, setState, setField, resetState };\n}\n","import { createContext, useMemo, type ReactNode } from 'react';\n\nimport config from 'config';\nimport { useLocalStorage } from 'hooks/useLocalStorage';\nimport type { ConfigContextType } from 'types/config';\n\n// ==============================|| CONFIG CONTEXT ||============================== //\n\nexport const ConfigContext = createContext<ConfigContextType | null>(null);\n\n// ==============================|| CONFIG PROVIDER ||============================== //\n\ninterface ConfigProviderProps {\n  children: ReactNode;\n}\n\nexport function ConfigProvider({ children }: ConfigProviderProps) {\n  const { state, setState, setField, resetState } = useLocalStorage('berry-config-vite-ts', config);\n\n  const memoizedValue = useMemo(\n    () => ({ state, setState, setField, resetState }),\n    [state, setField, setState, resetState]\n  );\n\n  return <ConfigContext.Provider value={memoizedValue}>{children}</ConfigContext.Provider>;\n}\n","import { useContext } from 'react';\n\nimport { ConfigContext } from 'contexts/ConfigContext';\nimport type { ConfigContextType } from 'types/config';\n\n// ==============================|| CONFIG - HOOKS ||============================== //\n\nexport default function useConfig(): ConfigContextType {\n  const context = useContext(ConfigContext);\n\n  if (!context) {\n    throw new Error('useConfig must be used inside ConfigProvider');\n  }\n\n  return context;\n}\n"],"names":["useState","useEffect","useCallback","importShared","useLocalStorage","key","defaultValue","readValue","item","err","state","setState","setField","field","value","prev","resetState","createContext","useMemo","ConfigContext","ConfigProvider","children","config","memoizedValue","useContext","useConfig","context"],"mappings":"0JAAA,KAAA,CAAA,SAAAA,EAAA,UAAAC,EAAA,YAAAC,CAAA,EAAA,MAAAC,EAAA,OAAA,EAaO,SAASC,EACdC,EACAC,EACwB,CACxB,MAAMC,EAAY,IAAS,CACzB,GAAI,OAAO,OAAW,IACpB,OAAOD,EAGT,GAAI,CACF,MAAME,EAAO,aAAa,QAAQH,CAAG,EACrC,OAAOG,EAAQ,KAAK,MAAMA,CAAI,EAAUF,CAC1C,OAASG,EAAK,CACZ,eAAQ,KAAK,mCAAmCJ,CAAG,KAAMI,CAAG,EACrDH,CACT,CACF,EAEM,CAACI,EAAOC,CAAQ,EAAIX,EAAY,IAAMO,GAAW,EAEvDN,EAAU,IAAM,CACd,GAAI,CACF,aAAa,QAAQI,EAAK,KAAK,UAAUK,CAAK,CAAC,CACjD,OAASD,EAAK,CACZ,QAAQ,KAAK,mCAAmCJ,CAAG,KAAMI,CAAG,CAC9D,CACF,EAAG,CAACJ,EAAKK,CAAK,CAAC,EAEf,MAAME,EAAWV,EACf,CAAoBW,EAAUC,IAAgB,CAC5CH,EAAUI,IAAU,CAClB,GAAGA,EACH,CAACF,CAAK,EAAGC,CAAA,EACT,CACJ,EACA,CAACH,CAAQ,CAAA,EAGLK,EAAad,EAAY,IAAM,CACnCS,EAASL,CAAY,EACrB,GAAI,CACF,aAAa,QAAQD,EAAK,KAAK,UAAUC,CAAY,CAAC,CACxD,OAASG,EAAK,CACZ,QAAQ,KAAK,qCAAqCJ,CAAG,KAAMI,CAAG,CAChE,CACF,EAAG,CAACH,EAAcD,CAAG,CAAC,EAEtB,MAAO,CAAE,MAAAK,EAAO,SAAAC,EAAU,SAAAC,EAAU,WAAAI,CAAA,CACtC,CC7DA,KAAA,CAAA,cAAAC,EAAA,QAAAC,CAAA,EAAA,MAAAf,EAAA,OAAA,EAQagB,EAAgBF,EAAwC,IAAI,EAQlE,SAASG,EAAe,CAAE,SAAAC,GAAiC,CAChE,KAAM,CAAE,MAAAX,EAAO,SAAAC,EAAU,SAAAC,EAAU,WAAAI,GAAeZ,EAAgB,uBAAwBkB,CAAM,EAE1FC,EAAgBL,EACpB,KAAO,CAAE,MAAAR,EAAO,SAAAC,EAAU,SAAAC,EAAU,WAAAI,CAAA,GACpC,CAACN,EAAOE,EAAUD,EAAUK,CAAU,CAAA,EAGxC,aAAQG,EAAc,SAAd,CAAuB,MAAOI,EAAgB,SAAAF,EAAS,CACjE,CCzBA,KAAA,CAAA,WAAAG,CAAA,EAAA,MAAArB,EAAA,OAAA,EAOA,SAAwBsB,GAA+B,CACrD,MAAMC,EAAUF,EAAWL,CAAa,EAExC,GAAI,CAACO,EACH,MAAM,IAAI,MAAM,8CAA8C,EAGhE,OAAOA,CACT"}