import{importShared as j}from"./__federation_fn_import-ROHmt-Wr.js";import{j as e}from"./useForkRef-BcC6EfDH.js";import{M as v}from"./MainCard-BN-3sZL8.js";import{l as b}from"./leads-BlzHCf2S.js";import{i as g}from"./axios-D-DgzO2k.js";import{B as m}from"./Box-BoOsA6HK.js";import{C as k,d as l}from"./Button-BSxsv2fQ.js";import{A as w}from"./Alert-DviP8MUR.js";import{T as t}from"./Typography-DjCnPsjL.js";import{G as a}from"./GridLegacy-Bxmhmsx3.js";import{C}from"./Chip-Cvckel7e.js";const{useCallback:A,useEffect:L,useMemo:D,useState:h}=await j("react"),{useNavigate:P,useParams:N}=await j("react-router-dom");function f(r){return r?new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}).format(new Date(r)):"—"}function B(r){return r==null||Number.isNaN(r)?"—":`${Math.round(r)}%`}function E(r){if(!r)return!1;const i=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[089abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/,s=/^\d+$/;return i.test(r)||s.test(r)}function O(){const{id:r}=N(),i=P(),[s,y]=h(null),[c,x]=h(!0),[o,d]=h(null),u=A(async()=>{if(!E(r)){d({kind:"not-found",message:"The requested lead could not be found."}),x(!1);return}x(!0);try{const n=await b.getLead(r);y(n),d(null)}catch(n){g(n)?n.response?.status===404?d({kind:"not-found",message:"The requested lead could not be found."}):d({kind:"network",message:n.response?.data?.message??"We could not load this lead. Please try again in a moment."}):d({kind:"network",message:"We could not load this lead. Please try again in a moment."})}finally{x(!1)}},[r]);L(()=>{u()},[u]);const p=D(()=>{switch(s?.status?.toLowerCase()){case"converted":case"qualified":return"success";case"unqualified":return"error";case"working":case"contacted":return"info";default:return"default"}},[s?.status]);return e.jsxs(v,{title:"Lead Details",secondary:e.jsxs(m,{sx:{display:"flex",gap:1},children:[e.jsx(l,{variant:"outlined",onClick:()=>i(-1),children:"Back"}),r&&e.jsx(l,{variant:"contained",color:"secondary",onClick:()=>i(`/leads/${r}/edit`),children:"Edit Lead"})]}),children:[c&&e.jsx(m,{sx:{display:"flex",justifyContent:"center",py:6},children:e.jsx(k,{})}),!c&&o&&e.jsxs(w,{severity:o.kind==="network"?"error":"warning",children:[e.jsx(t,{variant:"body2",sx:{mb:1},children:o.message}),e.jsxs(m,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[o.kind==="network"&&e.jsx(l,{size:"small",onClick:()=>void u(),variant:"outlined",children:"Retry"}),e.jsx(l,{size:"small",onClick:()=>i("/leads"),variant:"contained",children:"Back to Leads"})]})]}),!c&&!o&&s&&e.jsxs(a,{container:!0,spacing:2,children:[e.jsxs(a,{xs:12,sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsxs(t,{variant:"h4",children:[s.firstName," ",s.lastName]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Lead ID: ",s.id]})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Email"}),e.jsx(t,{variant:"body1",children:s.email})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Phone"}),e.jsx(t,{variant:"body1",children:s.phone??"—"})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Company"}),e.jsx(t,{variant:"body1",children:s.company??"—"})]}),e.jsxs(a,{xs:12,md:6,sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Status"}),e.jsx(C,{label:s.status??"—",color:p,size:"small"})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Source"}),e.jsx(t,{variant:"body1",children:s.source??"—"})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Score"}),e.jsx(t,{variant:"body1",children:B(s.score)})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Owner"}),e.jsx(t,{variant:"body1",children:s.ownerId})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Created At"}),e.jsx(t,{variant:"body1",children:f(s.createdAt)})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Updated At"}),e.jsx(t,{variant:"body1",children:f(s.updatedAt)})]}),e.jsxs(a,{xs:12,children:[e.jsx(t,{variant:"subtitle2",color:"text.secondary",children:"Notes"}),e.jsx(t,{variant:"body1",children:s.notes??"—"})]})]})]})}export{O as default};
//# sourceMappingURL=LeadDetailPage-C5SGvkfp.js.map
