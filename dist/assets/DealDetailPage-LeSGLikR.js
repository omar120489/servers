import{importShared as j}from"./__federation_fn_import-ROHmt-Wr.js";import{j as e}from"./useForkRef-BcC6EfDH.js";import{M as b}from"./MainCard-BN-3sZL8.js";import{d as g}from"./deals-iLL9qn1F.js";import{i as v}from"./axios-D-DgzO2k.js";import{B as u}from"./Box-BoOsA6HK.js";import{C as D,d}from"./Button-BSxsv2fQ.js";import{A as k}from"./Alert-DviP8MUR.js";import{T as r}from"./Typography-DjCnPsjL.js";import{G as a}from"./GridLegacy-Bxmhmsx3.js";import{C as y}from"./Chip-Cvckel7e.js";const{useCallback:C,useEffect:w,useState:h}=await j("react"),{useNavigate:A,useParams:P}=await j("react-router-dom");function F(t){return t==null||Number.isNaN(t)?"—":new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:2}).format(t)}function N(t){if(t==null||Number.isNaN(t))return"—";const n=t>1?t:t*100;return`${Math.round(n)}%`}function f(t){return t?new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}).format(new Date(t)):"—"}function I(t){if(!t)return!1;const n=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[089abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/,s=/^\d+$/;return n.test(t)||s.test(t)}function R(){const{id:t}=P(),n=A(),[s,p]=h(null),[c,x]=h(!0),[i,o]=h(null),m=C(async()=>{if(!I(t)){o({kind:"not-found",message:"The requested deal could not be found."}),x(!1);return}x(!0);try{const l=await g.getDeal(t);p(l),o(null)}catch(l){v(l)?l.response?.status===404?o({kind:"not-found",message:"The requested deal could not be found."}):o({kind:"network",message:l.response?.data?.message??"We could not load this deal. Please try again in a moment."}):o({kind:"network",message:"We could not load this deal. Please try again in a moment."})}finally{x(!1)}},[t]);return w(()=>{m()},[m]),e.jsxs(b,{title:"Deal Details",secondary:e.jsxs(u,{sx:{display:"flex",gap:1},children:[e.jsx(d,{variant:"outlined",onClick:()=>n(-1),children:"Back"}),t&&e.jsx(d,{variant:"contained",color:"secondary",onClick:()=>n(`/deals/${t}/edit`),children:"Edit Deal"})]}),children:[c&&e.jsx(u,{sx:{display:"flex",justifyContent:"center",py:6},children:e.jsx(D,{})}),!c&&i&&e.jsxs(k,{severity:i.kind==="network"?"error":"warning",children:[e.jsx(r,{variant:"body2",sx:{mb:1},children:i.message}),e.jsxs(u,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[i.kind==="network"&&e.jsx(d,{size:"small",onClick:()=>void m(),variant:"outlined",children:"Retry"}),e.jsx(d,{size:"small",variant:"contained",onClick:()=>n("/deals"),children:"Back to Deals"})]})]}),!c&&!i&&s&&e.jsxs(a,{container:!0,spacing:2,children:[e.jsxs(a,{xs:12,sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(r,{variant:"h4",children:s.name}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Deal ID: ",s.id]})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Amount"}),e.jsx(r,{variant:"body1",children:F(s.amount)})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Stage"}),e.jsx(y,{label:s.stage??"—",variant:"outlined",size:"small"})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Status"}),e.jsx(y,{label:s.status??"—",color:"primary",size:"small",variant:"outlined"})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Probability"}),e.jsx(r,{variant:"body1",children:N(s.probability)})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Close Date"}),e.jsx(r,{variant:"body1",children:f(s.closeDate)})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Owner"}),e.jsx(r,{variant:"body1",children:s.ownerId})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Company"}),e.jsx(r,{variant:"body1",children:s.companyId??"—"})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Contact"}),e.jsx(r,{variant:"body1",children:s.contactId??"—"})]}),e.jsxs(a,{xs:12,md:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Updated At"}),e.jsx(r,{variant:"body1",children:f(s.updatedAt)})]}),e.jsxs(a,{xs:12,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Description"}),e.jsx(r,{variant:"body1",children:s.description??"—"})]})]})]})}export{R as default};
//# sourceMappingURL=DealDetailPage-LeSGLikR.js.map
